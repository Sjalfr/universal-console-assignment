<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Deep Space Background â€“ Depth Tuned</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: #000;
    }
    canvas { display: block; }
  </style>
</head>
<body>
<canvas id="canvas"></canvas>

<script>
// ================== CANVAS ==================
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');

function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener('resize', resize);
resize();

// ================== CAMERA ==================
let mx = 0, my = 0;
canvas.addEventListener('mousemove', e => {
  mx = (e.clientX / canvas.width - 0.5) * 2;
  my = (e.clientY / canvas.height - 0.5) * 2;
});

function parallax(depth) {
  return { x: mx * 50 / depth, y: my * 50 / depth };
}

// ================== STARS ==================
class Star {
  constructor(depth) {
    this.depth = depth;
    this.x = Math.random() * canvas.width;
    this.y = Math.random() * canvas.height;

    if (depth < 2) this.r = Math.random() * 1.8 + 0.8;
    else if (depth < 4) this.r = Math.random() * 1.2 + 0.4;
    else this.r = Math.random() * 0.8 + 0.3;

    this.phase = Math.random() * Math.PI * 2;
    this.temp = Math.random();
  }

  update(dt) {
    this.phase += dt * 0.25 / this.depth;
  }

  draw() {
    const p = parallax(this.depth);
    const a = 0.5 + Math.sin(this.phase) * 0.2;

    let color;
    if (this.temp < 0.15) color = `rgba(255,200,180,${a})`;
    else if (this.temp > 0.85) color = `rgba(180,200,255,${a})`;
    else color = `rgba(255,255,255,${a})`;

    ctx.fillStyle = color;
    ctx.fillRect(this.x + p.x, this.y + p.y, this.r, this.r);
  }
}

// ================== REALISTIC GALAXY ==================
class Galaxy {
  constructor() {
    this.x = Math.random() * canvas.width;
    this.y = Math.random() * canvas.height;
    this.radius = 180 + Math.random() * 220;
    this.angle = Math.random() * Math.PI * 2;
    this.spin = (Math.random() - 0.5) * 0.02;
    this.hue = 200 + Math.random() * 40;
  }

  update(dt) {
    this.angle += this.spin * dt;
  }

  draw() {
    const p = parallax(8);
    ctx.save();
    ctx.translate(this.x + p.x, this.y + p.y);
    ctx.rotate(this.angle);

    const grad = ctx.createRadialGradient(0, 0, 0, 0, 0, this.radius);
    grad.addColorStop(0, `hsla(${this.hue},70%,75%,0.18)`);
    grad.addColorStop(0.3, `hsla(${this.hue},70%,55%,0.08)`);
    grad.addColorStop(0.6, `hsla(${this.hue},60%,40%,0.04)`);
    grad.addColorStop(1, 'rgba(0,0,0,0)');

    ctx.fillStyle = grad;
    ctx.beginPath();
    ctx.ellipse(0, 0, this.radius * 1.2, this.radius * 0.8, 0, 0, Math.PI * 2);
    ctx.fill();

    ctx.restore();
  }
}

// ================== DUST ==================
class Dust {
  constructor() {
    this.x = Math.random() * canvas.width;
    this.y = Math.random() * canvas.height;
    this.r = 350 + Math.random() * 400;
    this.h = 210 + Math.random() * 60;
  }

  draw() {
    const p = parallax(12);
    const g = ctx.createRadialGradient(
      this.x + p.x,
      this.y + p.y,
      0,
      this.x + p.x,
      this.y + p.y,
      this.r
    );

    g.addColorStop(0, `hsla(${this.h},50%,45%,0.02)`);
    g.addColorStop(1, 'rgba(0,0,0,0)');

    ctx.fillStyle = g;
    ctx.beginPath();
    ctx.arc(this.x + p.x, this.y + p.y, this.r, 0, Math.PI * 2);
    ctx.fill();
  }
}

// ================== FOREGROUND OBJECTS ==================
class ForegroundParticle {
  constructor() {
    this.reset();
  }

  reset() {
    this.x = Math.random() * canvas.width;
    this.y = Math.random() * canvas.height;
    this.vx = (Math.random() - 0.5) * 40;
    this.vy = (Math.random() - 0.5) * 40;
    this.size = Math.random() * 2 + 1.5;
    this.alpha = 0.3 + Math.random() * 0.4;
  }

  update(dt) {
    this.x += this.vx * dt;
    this.y += this.vy * dt;

    if (
      this.x < -50 || this.x > canvas.width + 50 ||
      this.y < -50 || this.y > canvas.height + 50
    ) {
      this.reset();
    }
  }

  draw() {
    const p = parallax(0.8);
    ctx.fillStyle = `rgba(255,255,255,${this.alpha})`;
    ctx.fillRect(this.x + p.x, this.y + p.y, this.size, this.size);
  }
}

// ================== GENERATION ==================
const closeStars = Array.from({ length: 120 }, () => new Star(1.5));
const midStars   = Array.from({ length: 500 }, () => new Star(3));
const farStars   = Array.from({ length: 900 }, () => new Star(6));

const galaxies   = Array.from({ length: 3 }, () => new Galaxy());
const dust       = Array.from({ length: 2 }, () => new Dust());
const foreground = Array.from({ length: 80 }, () => new ForegroundParticle());

// ================== LOOP ==================
let last = performance.now();

function loop(t) {
  const dt = (t - last) / 1000;
  last = t;

  ctx.fillStyle = '#000';
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  for (const d of dust) d.draw();
  for (const g of galaxies) { g.update(dt); g.draw(); }

  for (const s of farStars)   { s.update(dt); s.draw(); }
  for (const s of midStars)   { s.update(dt); s.draw(); }
  for (const s of closeStars) { s.update(dt); s.draw(); }

  for (const f of foreground) { f.update(dt); f.draw(); }

  requestAnimationFrame(loop);
}

requestAnimationFrame(loop);
</script>
</body>
</html>
